2022/08/15 19:44:11 [emerg] 1#1: host not found in upstream "auth_api" in /etc/nginx/nginx.conf:33
2022/08/15 19:45:56 [emerg] 1#1: host not found in upstream "auth_api" in /etc/nginx/nginx.conf:33
2022/08/15 19:46:23 [emerg] 1#1: host not found in upstream "auth_api" in /etc/nginx/nginx.conf:33
2022/08/15 21:16:36 [emerg] 1#1: unknown "auth_api" variable
2022/08/15 21:17:01 [error] 25#25: *1 no resolver defined to resolve auth_api, client: 172.20.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/_authenticate", host: "httpbin.org"
2022/08/15 21:17:01 [error] 25#25: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0 while sending to client, client: 172.20.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/_authenticate", host: "httpbin.org"
2022/08/15 21:19:20 [error] 25#25: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0 while sending to client, client: 172.20.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/_authenticate", upstream: "http://172.20.0.5:3000/login", host: "httpbin.org"
2022/08/15 21:20:56 [error] 24#24: *1 js: authenticated: [object Request]
2022/08/15 21:20:56 [error] 24#24: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0 while sending to client, client: 172.20.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/_authenticate", upstream: "http://172.20.0.5:3000/login", host: "httpbin.org"
2022/08/15 21:21:53 [error] 24#24: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0 while sending to client, client: 172.20.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/_authenticate", upstream: "http://172.20.0.5:3000/login", host: "httpbin.org"
2022/08/15 21:22:27 [error] 25#25: *1 js: authenticated: {"status":400,"args":{},"httpVersion":"1.1","remoteAddress":"172.20.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"876","X-Powered-By":"Express","Content-Security-Policy":"default-src 'none'","X-Content-Type-Options":"nosniff"},"requestText":"[object Object]","method":"POST","uri":"/_authenticate","responseText":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<title>Error</title>\n</head>\n<body>\n<pre>SyntaxError: Unexpected token o in JSON at position 1<br> &nbsp; &nbsp;at JSON.parse (&lt;anonymous&gt;)<br> &nbsp; &nbsp;at parse (/usr/src/app/node_modules/body-parser/lib/types/json.js:89:19)<br> &nbsp; &nbsp;at /usr/src/app/node_modules/body-parser/lib/read.js:121:18<br> &nbsp; &nbsp;at invokeCallback (/usr/src/app/node_modules/raw-body/index.js:224:16)<br> &nbsp; &nbsp;at done (/usr/src/app/node_modules/raw-body/index.js:213:7)<br> &nbsp; &nbsp;at IncomingMessage.onEnd (/usr/src/app/node_modules/raw-body/index.js:273:7)<br> &nbsp; &nbsp;at IncomingMessage.emit (events.js:412:35)<br> &nbsp; &nbsp;at endReadableNT (internal/streams/readable.js:1333:12)<br> &nbsp; &nbsp;at processTicksAndRejections (internal/process/task_queues.js:82:21)</pre>\n</body>\n</html>\n","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"thomas:password123","Content-Length":"38"}}
2022/08/15 21:22:27 [error] 25#25: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0 while sending to client, client: 172.20.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/_authenticate", upstream: "http://172.20.0.5:3000/login", host: "httpbin.org"
2022/08/15 21:24:15 [error] 25#25: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.20.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"16","X-Powered-By":"Express","ETag":"W/\"10-UiecVLFvCojUPVe0y7mBPqPMOas\""},"requestText":"{\"username\":\"thomas\",\"password\":\"password123\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":false}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"thomas:password123","Content-Length":"38"}}
2022/08/15 21:24:15 [error] 25#25: *1 js: authenticated: undefined
2022/08/15 21:25:47 [error] 25#25: *4 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.20.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"16","X-Powered-By":"Express","ETag":"W/\"10-UiecVLFvCojUPVe0y7mBPqPMOas\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":false}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/15 21:25:47 [error] 25#25: *4 js: authenticated: undefined
2022/08/15 21:35:25 [error] 24#24: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.20.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"16","X-Powered-By":"Express","ETag":"W/\"10-UiecVLFvCojUPVe0y7mBPqPMOas\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":false}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/15 21:35:25 [error] 24#24: *1 js: authenticated: "{\"status\":false}"
2022/08/15 21:35:25 [error] 24#24: *1 js: authenticated: undefined
2022/08/15 21:35:25 [error] 24#24: *1 js: authenticated: undefined
2022/08/15 21:36:53 [error] 25#25: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.20.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"16","X-Powered-By":"Express","ETag":"W/\"10-UiecVLFvCojUPVe0y7mBPqPMOas\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":false}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/15 21:36:53 [error] 25#25: *1 js: authenticated: [object Object]
2022/08/15 21:37:25 [error] 24#24: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.20.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"16","X-Powered-By":"Express","ETag":"W/\"10-UiecVLFvCojUPVe0y7mBPqPMOas\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":false}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/15 21:37:25 [error] 24#24: *1 js: authenticated: [object Object]
2022/08/15 21:37:25 [error] 24#24: *1 js: authenticated: false
2022/08/16 17:43:51 [error] 31#31: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 17:43:51 [error] 31#31: *1 js: authenticated: [object Object]
2022/08/16 17:43:51 [error] 31#31: *1 js: authenticated: true
2022/08/16 17:43:52 [error] 31#31: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0 while sending to client, client: 172.21.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/_opa_tenant-2", upstream: "http://3.94.154.124:80/_opa_tenant-2", host: "httpbin.org"
2022/08/16 17:46:00 [error] 24#24: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 17:46:00 [error] 24#24: *1 js: authenticated: [object Object]
2022/08/16 17:46:00 [error] 24#24: *1 js: authenticated: true
2022/08/16 17:46:00 [error] 24#24: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0 while sending to client, client: 172.21.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/_opa_tenant-2", upstream: "http://34.227.213.82:80/_opa_tenant-2", host: "httpbin.org"
2022/08/16 17:48:21 [error] 25#25: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 17:48:21 [error] 25#25: *1 js: authenticated: [object Object]
2022/08/16 17:48:21 [error] 25#25: *1 js: authenticated: true
2022/08/16 17:48:22 [error] 25#25: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0 while sending to client, client: 172.21.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/opa_tenant-2", upstream: "http://3.94.154.124:80/opa_tenant-2", host: "httpbin.org"
2022/08/16 17:51:37 [error] 25#25: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 17:51:37 [error] 25#25: *1 js: authenticated: [object Object]
2022/08/16 17:51:37 [error] 25#25: *1 js: authenticated: true
2022/08/16 17:51:37 [error] 25#25: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0 while sending to client, client: 172.21.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/opa_tenant-2", upstream: "http://52.87.105.151:80/opa_tenant-2", host: "httpbin.org"
2022/08/16 17:54:14 [error] 25#25: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 17:54:14 [error] 25#25: *1 js: authenticated: [object Object]
2022/08/16 17:54:14 [error] 25#25: *1 js: authenticated: true
2022/08/16 17:54:14 [error] 25#25: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0 while sending to client, client: 172.21.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/opa_tenant-2", upstream: "http://34.227.213.82:80/opa_tenant-2", host: "httpbin.org"
2022/08/16 17:55:45 [error] 24#24: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 17:55:45 [error] 24#24: *1 js: authenticated: [object Object]
2022/08/16 17:55:45 [error] 24#24: *1 js: authenticated: true
2022/08/16 17:55:45 [error] 24#24: *1 js: authorized: {}
2022/08/16 17:56:47 [error] 24#24: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 17:56:47 [error] 24#24: *1 js: authenticated: [object Object]
2022/08/16 17:56:47 [error] 24#24: *1 js: authenticated: true
2022/08/16 17:56:48 [error] 24#24: *1 js: authorized: lol
2022/08/16 17:56:48 [error] 24#24: *1 js: authorized: {}
2022/08/16 17:57:17 [error] 24#24: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 17:57:17 [error] 24#24: *1 js: authenticated: [object Object]
2022/08/16 17:57:17 [error] 24#24: *1 js: authenticated: true
2022/08/16 17:57:17 [error] 24#24: *1 js: authorized: lol
2022/08/16 17:57:17 [error] 24#24: *1 js: authorized: {}
2022/08/16 17:58:18 [error] 25#25: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 17:58:18 [error] 25#25: *1 js: authenticated: [object Object]
2022/08/16 17:58:18 [error] 25#25: *1 js: authenticated: true
2022/08/16 17:58:18 [error] 25#25: *1 js: authorized: {"status":404,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html","Content-Length":"233","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},"requestText":"{\"input\":{\"tenant_id\":\"tenant-2\",\"action\":\"PUT\",\"topic\":\"http://httpbin.org/put\"}}","method":"POST","uri":"/opa_tenant-2","responseText":"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\">\n<title>404 Not Found</title>\n<h1>Not Found</h1>\n<p>The requested URL was not found on the server.  If you entered the URL manually please check your spelling and try again.</p>\n","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 17:58:18 [error] 25#25: *1 js: authorized: {}
2022/08/16 18:02:02 [error] 24#24: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 18:02:02 [error] 24#24: *1 js: authenticated: [object Object]
2022/08/16 18:02:02 [error] 24#24: *1 js: authenticated: true
2022/08/16 18:02:02 [error] 24#24: *1 js: authorized: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"application/json","Content-Length":"2"},"requestText":"{\"input\":{\"tenant_id\":\"tenant-2\",\"action\":\"PUT\",\"topic\":\"http://httpbin.org/put\"}}","method":"POST","uri":"/opa","responseText":"{}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 18:02:02 [error] 24#24: *1 js: authorized: [object Object]
2022/08/16 18:02:59 [error] 24#24: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 18:02:59 [error] 24#24: *1 js: authenticated: [object Object]
2022/08/16 18:02:59 [error] 24#24: *1 js: authenticated: true
2022/08/16 18:02:59 [error] 24#24: *1 js: authorized: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"application/json","Content-Length":"2"},"requestText":"{\"input\":{\"tenant_id\":\"tenant-2\",\"action\":\"PUT\",\"topic\":\"http://httpbin.org/put\"}}","method":"POST","uri":"/opa","responseText":"{}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 18:02:59 [error] 24#24: *1 js: authorized: {}
2022/08/16 18:04:22 [error] 25#25: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 18:04:22 [error] 25#25: *1 js: authenticated: [object Object]
2022/08/16 18:04:22 [error] 25#25: *1 js: authenticated: true
2022/08/16 18:04:22 [error] 25#25: *1 js: authorized: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"application/json","Content-Length":"2"},"requestText":"{\"input\":{\"tenant_id\":\"tenant-2\",\"action\":\"PUT\",\"topic\":\"http://httpbin.org/put\"}}","method":"POST","uri":"/opa","responseText":"{}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 18:04:22 [error] 25#25: *1 js: authorized: {}
2022/08/16 18:06:15 [error] 25#25: *6 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 18:06:15 [error] 25#25: *6 js: authenticated: [object Object]
2022/08/16 18:06:15 [error] 25#25: *6 js: authenticated: true
2022/08/16 18:06:15 [error] 25#25: *6 js: authorized: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"application/json","Content-Length":"2"},"requestText":"{\"input\":{\"tenant_id\":\"tenant-2\",\"action\":\"PUT\",\"topic\":\"http://httpbin.org/post\"}}","method":"POST","uri":"/opa","responseText":"{}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 18:06:15 [error] 25#25: *6 js: authorized: {}
2022/08/16 18:19:57 [error] 25#25: *9 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 18:19:57 [error] 25#25: *9 js: authenticated: [object Object]
2022/08/16 18:19:57 [error] 25#25: *9 js: authenticated: true
2022/08/16 18:19:57 [error] 25#25: *9 js: authorized: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"application/json","Content-Length":"2"},"requestText":"{\"input\":{\"tenant_id\":\"tenant-2\",\"action\":\"PUT\",\"topic\":\"http://httpbin.org/post\"}}","method":"POST","uri":"/opa","responseText":"{}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 18:19:57 [error] 25#25: *9 js: authorized: {}
2022/08/16 18:20:26 [error] 25#25: *12 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 18:20:26 [error] 25#25: *12 js: authenticated: [object Object]
2022/08/16 18:20:26 [error] 25#25: *12 js: authenticated: true
2022/08/16 18:20:26 [error] 25#25: *12 js: authorized: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"application/json","Content-Length":"2"},"requestText":"{\"input\":{\"tenant_id\":\"tenant-2\",\"action\":\"PUT\",\"topic\":\"http://httpbin.org/put\"}}","method":"POST","uri":"/opa","responseText":"{}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 18:20:26 [error] 25#25: *12 js: authorized: {}
2022/08/16 19:45:43 [error] 24#24: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 19:45:43 [error] 24#24: *1 js: authenticated: [object Object]
2022/08/16 19:45:43 [error] 24#24: *1 js: authenticated: true
2022/08/16 19:45:43 [error] 24#24: *1 js: authorized: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"application/json","Content-Length":"88"},"requestText":"{\"input\":{\"tenant_id\":\"tenant-2\",\"action\":\"PUT\",\"topic\":\"http://httpbin.org/put\"}}","method":"POST","uri":"/opa","responseText":"{\"result\":{\"allow\":true,\"blacklist\":false,\"test\":{\"allow_test\":false},\"whitelist\":true}}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 19:45:43 [error] 24#24: *1 js: authorized: {}
2022/08/16 19:46:52 [error] 24#24: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 19:46:52 [error] 24#24: *1 js: authenticated: [object Object]
2022/08/16 19:46:52 [error] 24#24: *1 js: authenticated: true
2022/08/16 19:46:52 [error] 24#24: *1 js: authorized: {"result":{"allow":true,"blacklist":false,"test":{"allow_test":false},"whitelist":true}}
2022/08/16 19:48:39 [error] 24#24: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 19:48:39 [error] 24#24: *1 js: authenticated: [object Object]
2022/08/16 19:48:39 [error] 24#24: *1 js: authenticated: true
2022/08/16 19:48:39 [error] 24#24: *1 js: authorized: {}
2022/08/16 19:49:57 [error] 25#25: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 19:49:57 [error] 25#25: *1 js: authenticated: [object Object]
2022/08/16 19:49:57 [error] 25#25: *1 js: authenticated: true
2022/08/16 19:49:57 [error] 25#25: *1 js: authorized: {}
2022/08/16 19:51:24 [error] 25#25: *1 js: authenticated: {"status":200,"args":{},"httpVersion":"1.1","remoteAddress":"172.21.0.1","headersOut":{"Content-Type":"text/html; charset=utf-8","Content-Length":"15","X-Powered-By":"Express","ETag":"W/\"f-NQVRlQfKHCoInEbhALgECMonhCE\""},"requestText":"{\"username\":\"tenant-2\",\"password\":\"123456\"}","method":"POST","uri":"/_authenticate","responseText":"{\"status\":true}","headersIn":{"Host":"httpbin.org","User-Agent":"curl/7.78.0","Accept":"*/*","Proxy-Connection":"Keep-Alive","Content-Type":"application/json","Proxy-Authenticate":"Basic","Proxy-Authorization":"tenant-2:123456","Content-Length":"38"}}
2022/08/16 19:51:24 [error] 25#25: *1 js: authenticated: [object Object]
2022/08/16 19:51:24 [error] 25#25: *1 js: authenticated: true
2022/08/16 19:51:24 [error] 25#25: *1 js: authorized: /_authorize_request
2022/08/16 19:51:24 [error] 25#25: *1 js: authorized: httpbin.org
2022/08/16 19:54:25 [error] 24#24: *1 js: /opa_tenant-2
2022/08/16 19:54:25 [error] 24#24: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0 while sending to client, client: 172.21.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/opa_tenant-2", upstream: "http://52.87.105.151:80/opa_tenant-2", host: "httpbin.org"
2022/08/16 19:55:19 [error] 24#24: *1 js: /opa_tenant-2
2022/08/16 19:55:20 [error] 24#24: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0 while sending to client, client: 172.21.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/opa_tenant-2", upstream: "http://34.227.213.82:80/opa_tenant-2", host: "httpbin.org"
2022/08/16 19:56:31 [error] 25#25: *1 js: /opa_tenant-2
2022/08/16 19:56:36 [error] 25#25: *8 js: /opa_tenant-2
2022/08/16 19:56:39 [error] 25#25: *11 js: /opa_tenant-2
2022/08/16 19:57:25 [error] 25#25: *1 js: /opa_tenant-2
2022/08/16 19:57:43 [error] 25#25: *1 js: /opa_tenant-2
2022/08/16 19:57:43 [error] 25#25: *1 no host in upstream "/opa_tenant-2:8181/v1/data/app/iot", client: 172.21.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/opa_tenant-2", host: "httpbin.org"
2022/08/16 19:57:43 [error] 25#25: *1 js exception: Error: unhandled promise rejection: SyntaxError: Unexpected token at position 0, client: 172.21.0.1, server: , request: "PUT http://httpbin.org/put?test=123 HTTP/1.1", subrequest: "/opa_tenant-2", host: "httpbin.org"
2022/08/16 19:57:58 [error] 24#24: *1 js: /opa_tenant-2
2022/08/16 19:59:28 [error] 25#25: *1 js: /opa_tenant-2
2022/08/16 19:59:36 [error] 25#25: *8 js: /opa_tenant-3
2022/08/16 19:59:40 [error] 25#25: *11 js: /opa_tenant-2
2022/08/16 19:59:45 [error] 25#25: *17 js: /opa_tenant-2
